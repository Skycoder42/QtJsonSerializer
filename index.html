<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtJsonSerializer: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="display: inline;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtJsonSerializer
   &#160;<span id="projectnumber">3.1.2</span>
   </div>
   <div id="projectbrief">A library to perform generic seralization and deserialization of QObjects</div>
  </td>
 </tr>
 </tbody>
</table>
<a style="float: right;" target="_blank"  href="https://github.com/Skycoder42/QJsonSerializer">
<img style="padding: 10px;" src="GitHub_Logo.png"/>
</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">QtJsonSerializer Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#qtjsonserializer_readme_label_0">Features</a></li>
<li class="level1"><a href="#qtjsonserializer_readme_label_1">Download/Installation</a></li>
<li class="level1"><a href="#qtjsonserializer_readme_label_2">Usage</a><ul><li class="level2"><a href="#qtjsonserializer_readme_label_3">Example</a></li>
<li class="level2"><a href="#qtjsonserializer_readme_label_4">Important Usage Hints</a></li>
<li class="level2"><a href="#qtjsonserializer_readme_label_5">Support for alternative Containers</a></li>
</ul>
</li>
<li class="level1"><a href="#qtjsonserializer_readme_label_6">Documentation</a></li>
</ul>
</div>
<div class="textblock"><p>A library to perform generic seralization and deserialization of QObjects.</p>
<p>With this small library, you are able to serialize any <a class="el" href="class_q_object.html">QObject</a> or Q_GADGET class to JSON and back. This is done with help of Qt's meta system.</p>
<p><a href="https://travis-ci.org/Skycoder42/QtJsonSerializer"></a> <a href="https://ci.appveyor.com/project/Skycoder42/qtjsonserializer/branch/master"></a> <a href="https://www.codacy.com/app/Skycoder42/QtJsonSerializer"></a> <a href="https://aur.archlinux.org/packages/qt5-jsonserializer/"></a></p>
<h1><a class="anchor" id="qtjsonserializer_readme_label_0"></a>
Features</h1>
<ul>
<li>Serialize QObjects, Q_GADGETS, lists, maps, etc. to JSON, in a generic matter</li>
<li>... and of course deserialize JSON back as well</li>
<li>De/serialize any QVariant - as long as it contains only basic types or one of the above<ul>
<li>Works even with QJsonValue/Array/Object as properties</li>
</ul>
</li>
<li>Serializes Q_PROPERTY elements</li>
<li>Enum de/serialization as integer or as string</li>
<li>Deserialization: Additional JSON-values will be stored as dynamic properties for QObjects</li>
<li>Supports polymorphism</li>
<li>Fully Unit-Tested</li>
<li>Thread-Safe</li>
<li>Easily extensible</li>
</ul>
<h1><a class="anchor" id="qtjsonserializer_readme_label_1"></a>
Download/Installation</h1>
<p>There are multiple ways to install the Qt module, sorted by preference:</p>
<ol type="1">
<li>Package Managers: The library is available via:<ul>
<li><b>Arch-Linux:</b> AUR-Repository: <a href="https://aur.archlinux.org/packages/qt5-jsonserializer/"><code>qt5-jsonserializer</code></a></li>
<li><b>Ubuntu:</b> Launchpad-PPA:<ul>
<li>Artful: <a href="https://launchpad.net/~skycoder42/+archive/ubuntu/qt-modules">ppa:skycoder42/qt-modules</a>, package <code>libqt5jsonserializer[3/-dev]</code></li>
<li>Xenial: <a href="https://launchpad.net/~skycoder42/+archive/ubuntu/qt-modules-opt">ppa:skycoder42/qt-modules-opt</a>, package <code>qtjsonserializer</code></li>
</ul>
</li>
<li><b>MacOs:</b><ul>
<li>Tap: <a href="https://github.com/Skycoder42/homebrew-qt-modules"><code>brew tap Skycoder42/qt-modules</code></a></li>
<li>Package: <code>qtjsonserializer</code></li>
<li><b>IMPORTANT:</b> Due to limitations of homebrew, you must run <code>source /usr/local/opt/qtjsonserializer/bashrc.sh</code> before you can use the module.</li>
</ul>
</li>
</ul>
</li>
<li>Simply add my repository to your Qt MaintenanceTool (Image-based How-To here: <a href="https://github.com/Skycoder42/QtModules/blob/master/README.md#add-my-repositories-to-qt-maintenancetool">Add custom repository</a>):<ol type="a">
<li>Open the MaintenanceTool, located in your Qt install directory (e.g. <code>~/Qt/MaintenanceTool</code>)</li>
<li>Select <code>Add or remove components</code> and click on the <code>Settings</code> button</li>
<li>Go to <code>Repositories</code>, scroll to the bottom, select <code>User defined repositories</code> and press <code>Add</code></li>
<li>In the right column (selected by default), type:<ul>
<li>On Linux: <a href="https://install.skycoder42.de/qtmodules/linux_x64">https://install.skycoder42.de/qtmodules/linux_x64</a></li>
<li>On Windows: <a href="https://install.skycoder42.de/qtmodules/windows_x86">https://install.skycoder42.de/qtmodules/windows_x86</a></li>
<li>On Mac: <a href="https://install.skycoder42.de/qtmodules/mac_x64">https://install.skycoder42.de/qtmodules/mac_x64</a></li>
</ul>
</li>
<li>Press <code>Ok</code>, make shure <code>Add or remove components</code> is still selected, and continue the install (<code>Next &gt;</code>)</li>
<li>A new entry appears under all supported Qt Versions (e.g. <code>Qt &gt; Qt 5.8 &gt; Skycoder42 Qt modules</code>)</li>
<li>You can install either all of my modules, or select the one you need: <code>Qt Json Serializer</code></li>
<li>Continue the setup and thats it! you can now use the module for all of your installed Kits for that Qt Version</li>
</ol>
</li>
<li>Download the compiled modules from the release page. <b>Note:</b> You will have to add the correct ones yourself and may need to adjust some paths to fit your installation!</li>
<li>Build it yourself! <b>Note:</b> This requires perl to be installed. If you don't have/need cmake, you can ignore the related warnings. To automatically build and install to your Qt installation, run:<ul>
<li><code>qmake</code></li>
<li><code>make qmake_all</code></li>
<li><code>make</code></li>
<li><code>make install</code></li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="qtjsonserializer_readme_label_2"></a>
Usage</h1>
<p>The serializer is provided as a Qt module. Thus, all you have to do is install the module, and then, in your project, add <code>QT += jsonserializer</code> to your <code>.pro</code> file!</p>
<h2><a class="anchor" id="qtjsonserializer_readme_label_3"></a>
Example</h2>
<p>Both serialization and desertialization are rather simple. Create an object, and then use the serializer as follows:</p>
<p>The following is an example for a serializable object. <em>Note:</em> The usage of <code>MEMBER</code> Properties is not required, and simply done to make this example more readable. </p><div class="fragment"><div class="line"><span class="keyword">class </span>TestObject : <span class="keyword">public</span> <a class="code" href="class_q_object.html">QObject</a></div><div class="line">{</div><div class="line">    Q_OBJECT</div><div class="line"></div><div class="line">    Q_PROPERTY(QString stringProperty MEMBER stringProperty)</div><div class="line">    Q_PROPERTY(QList&lt;int&gt; simpeList MEMBER simpeList)</div><div class="line">    Q_PROPERTY(TestObject* childObject MEMBER childObject)</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Q_INVOKABLE TestObject(<a class="code" href="class_q_object.html">QObject</a> *parent = <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    QString stringProperty;</div><div class="line">    QList&lt;int&gt; simpeList;</div><div class="line">    TestObject* childObject;</div><div class="line">}</div></div><!-- fragment --><p>You can serialize (and deserialize) the object with: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> serializer = <span class="keyword">new</span> <a class="code" href="class_q_json_serializer.html">QJsonSerializer</a>(<span class="keyword">this</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">    <span class="comment">//serialize</span></div><div class="line">    <span class="keyword">auto</span> <span class="keywordtype">object</span> = <span class="keyword">new</span> TestObject();</div><div class="line">    <span class="keywordtype">object</span>-&gt;stringProperty = <span class="stringliteral">&quot;test&quot;</span>;</div><div class="line">    <span class="keywordtype">object</span>-&gt;simpeList = {1, 2, 3};</div><div class="line">    <span class="keywordtype">object</span>-&gt;childObject = <span class="keyword">new</span> TestObject(<span class="keywordtype">object</span>);</div><div class="line">    <span class="keyword">auto</span> json = serializer-&gt;serialize(<span class="keywordtype">object</span>);</div><div class="line">    qDebug() &lt;&lt; json;</div><div class="line">    <span class="keyword">delete</span> object;</div><div class="line"></div><div class="line">    <span class="comment">//deserialize</span></div><div class="line">    <span class="keywordtype">object</span> = serializer-&gt;deserialize&lt;TestObject&gt;(json);<span class="comment">//optional: specify the parent</span></div><div class="line">    qDebug() &lt;&lt; <span class="keywordtype">object</span>-&gt;stringProperty</div><div class="line">             &lt;&lt; <span class="keywordtype">object</span>-&gt;simpeList</div><div class="line">             &lt;&lt; <span class="keywordtype">object</span>-&gt;childObject;</div><div class="line">    <span class="keyword">delete</span> object;</div><div class="line">} <span class="keywordflow">catch</span>(<a class="code" href="class_q_json_serializer_exception.html">QJsonSerializerException</a> &amp;e) {</div><div class="line">    qDebug() &lt;&lt; e.<a class="code" href="class_q_json_serializer_exception.html#aa0c888addeffaf1c683a18876fc44c57">what</a>();</div><div class="line">}</div></div><!-- fragment --><p>For the serialization, the created json would look like this: </p><div class="fragment"><div class="line">{</div><div class="line">    &quot;stringProperty&quot;: &quot;test&quot;,</div><div class="line">    &quot;simpeList&quot;: [1, 2, 3],</div><div class="line">    &quot;childObject&quot;: {</div><div class="line">        &quot;stringProperty&quot;: &quot;&quot;,</div><div class="line">        &quot;simpeList&quot;: [],</div><div class="line">        &quot;childObject&quot;: null</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="qtjsonserializer_readme_label_4"></a>
Important Usage Hints</h2>
<p>In order for the serializer to properly work, there are a few things you have to know and do:</p>
<ol type="1">
<li>Only Q_PROPERTY properties will be serialized, and of those only properties that are marked to be stored (see <a href="https://doc.qt.io/qt-5/properties.html#requirements-for-declaring-properties">The Property System</a>, STORED attribute)</li>
<li>For deserialization of QObjects, they need an invokable constructor, that takes only a parent: <code>Q_INVOKABLE MyClass(QObject*);</code></li>
<li>Only the following types can be serialized:<ul>
<li><code>QObject*</code> and deriving classes</li>
<li>Classes/structs marked with <code>Q_GADGET</code> (as value types only!)</li>
<li><code>QList</code>, of any type that is serializable as well</li>
<li><code>QMap&lt;QString, T&gt;</code>, with T beeing any type that is serializable as well (string as key type is required)</li>
<li>Simple types, that are supported by QJsonValue (See <a href="https://doc.qt.io/qt-5/qjsonvalue.html#fromVariant">QJsonValue::fromVariant</a> and <a href="https://doc.qt.io/qt-5/qjsonvalue.html#toVariant">QJsonValue::toVariant</a>)</li>
<li><code>Q_ENUM</code> and <code>Q_FLAG</code> types, as integer or as string<ul>
<li>The string de/serialization of Q_ENUM and Q_FLAG types only works if used as a Q_PROPERTY. Integer will always work.</li>
</ul>
</li>
<li><code>QJson...</code> types</li>
<li><code>QPair&lt;T, T&gt;</code>, of any types that are serializable as well</li>
<li>Standard QtCore types (e.g. QPoint, QSize, QVersionNumber, ...)</li>
<li>Any type you add yourself by extending the serializer</li>
</ul>
</li>
<li>While simple types (i.e. <code>QList&lt;int&gt;</code>) are supported out of the box, for custom types (like <code>QList&lt;TestObject*&gt;</code>) you will have to register converters. This goes for<ul>
<li>QList and QMap: use <code><a class="el" href="class_q_json_serializer.html#a1c0222392bf3ebacbf170521fdd2f08a" title="Registers a custom type for list and map converisons. ">QJsonSerializer::registerAllConverters</a>&lt;T&gt;()</code></li>
<li>QList only: use <code><a class="el" href="class_q_json_serializer.html#a98b3e1ea1e844e2f3806dbf3566d9972" title="Registers a custom type for list converisons. ">QJsonSerializer::registerListConverters</a>&lt;T&gt;()</code></li>
<li>QMap only: use <code><a class="el" href="class_q_json_serializer.html#a99a740629458388670ee7978e029ee33" title="Registers a custom type for map converisons. ">QJsonSerializer::registerMapConverters</a>&lt;T&gt;()</code></li>
<li>QPair: use <code><a class="el" href="class_q_json_serializer.html#ab643659186d5972a2bd7fd80bf5072b6" title="Registers two types for pair conversion. ">QJsonSerializer::registerPairConverters</a>&lt;T1, T2&gt;()</code></li>
<li>QSharedPointer/QPointer: use <code><a class="el" href="class_q_json_serializer.html#a760ee7fa357f7090d82ad6974a7fe08b" title="Registers a custom type for QSharedPointer and QPointer converisons. ">QJsonSerializer::registerPointerConverters</a>&lt;T&gt;()</code></li>
</ul>
</li>
<li>Polymorphic QObjects are supported. This is done by the serializer via adding a special <code>@@class</code> json property. To make a class polymorphic you can:<ul>
<li>Add <code>Q_CLASSINFO("polymorphic", "true")</code> to its definition</li>
<li>Globally force polyphormism (See <a class="el" href="class_q_json_serializer.html#ab3bf93ba232658e79a2a007d1f3d5239" title="Specify how the serializer should treat polymorphism for QObject classes. ">QJsonSerializer::polymorphing</a> in the doc)</li>
<li>Set a dynamic property: <code>setProperty("__qt_json_serializer_polymorphic", true);</code></li>
</ul>
</li>
<li>By default, the <code>objectName</code> property of QObjects is not serialized (See <a href="src/qjsonserializer.h#L20">keepObjectName</a>)</li>
<li>By default, the JSON <code>null</code> can only be converted to QObjects. For other types the conversion fails (See <a href="src/qjsonserializer.h#L19">allowDefaultNull</a>)</li>
</ol>
<h2><a class="anchor" id="qtjsonserializer_readme_label_5"></a>
Support for alternative Containers</h2>
<p>Right now, only <code>QList</code> and <code>QMap</code> ar supported as containers. The reason is, that adding containers requires the registration of converters. Supporting all containers would explode the generated binary, which is why I only support the most common ones.</p>
<p>If you need the other containers, you have 2 options:</p>
<ol type="1">
<li>Implement a custom <code><a class="el" href="class_q_json_type_converter.html" title="An interface to create custom serializer type converters. ">QJsonTypeConverter</a></code> (You will still have to register all the converters).</li>
<li>Create "converter" properties that are used for serialization only. This is the more simple version, but needs to be done for every occurance of that container, and adds some overhead.</li>
</ol>
<p>The following example shows how to do that to use <code>QVector</code> in code, but serialize as <code>QList</code>: </p><div class="fragment"><div class="line">struct MyGadget {</div><div class="line">    Q_GADGET</div><div class="line"></div><div class="line">    Q_PROPERTY(QList&lt;int&gt; myIntVector READ getMyIntList WRITE setMyIntList) //normal property name, as this one appears in json</div><div class="line">    //Important: Add &quot;STORED false&quot;:</div><div class="line">    Q_PROPERTY(QVector&lt;int&gt; myIntVectorInternal READ getMyIntVector WRITE setMyIntVector STORED false) //will not be serialized</div><div class="line"></div><div class="line">public:</div><div class="line">    QVector&lt;int&gt; getMyIntVector() const;</div><div class="line">    void setMyIntVector(const QVector&lt;int&gt; &amp;vector) ;</div><div class="line"></div><div class="line">private:</div><div class="line">    QList&lt;int&gt; getMyIntList() const {</div><div class="line">        return getMyIntVector().toList();</div><div class="line">    }</div><div class="line">    void setMyIntList(const QList&lt;int&gt; &amp;list) {</div><div class="line">        setMyIntVector(QVector&lt;int&gt;::fromList(list));</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><h1><a class="anchor" id="qtjsonserializer_readme_label_6"></a>
Documentation</h1>
<p>The documentation is available on <a href="https://skycoder42.github.io/QtJsonSerializer/">github pages</a>. It was created using <a href="http://www.doxygen.org/">doxygen</a>. The HTML-documentation and Qt-Help files are shipped together with the module for both the custom repository and the package on the release page. Please note that doxygen docs do not perfectly integrate with QtCreator/QtAssistant. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 26 2018 12:55:05 for QtJsonSerializer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
